# üìù Mini Blog API (FastAPI)

–£—á–µ–±–Ω—ã–π –º–∏–Ω–∏-–ø—Ä–æ–µ–∫—Ç API –±–ª–æ–≥–∞ –Ω–∞ **FastAPI**.  
–ë—ç–∫–µ–Ω–¥, —Ä–∞–±–æ—Ç–∞ —Å API, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ CRUD-–æ–ø–µ—Ä–∞—Ü–∏–∏.

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
MiniBlogAPI/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ main.py               
‚îÇ   ‚îú‚îÄ‚îÄ auth_service/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py  
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routers.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schemas.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ security.py
‚îÇ   ‚îú‚îÄ‚îÄ post_service/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py  
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routers.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ schemas.py       
‚îÇ   ‚îú‚îÄ‚îÄ comment_service/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py  
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routers.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ schemas.py       
‚îÇ   ‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ database.py
‚îÇ   ‚îî‚îÄ‚îÄ config.py
‚îú‚îÄ‚îÄ alembic/                  # –ú–∏–≥—Ä–∞—Ü–∏–∏ Alembic
‚îÇ   ‚îú‚îÄ‚îÄ env.py
‚îÇ   ‚îú‚îÄ‚îÄ README.md             # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ Alembic
‚îÇ   ‚îî‚îÄ‚îÄ versions/
‚îú‚îÄ‚îÄ .env                      # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (—Å–µ–∫—Ä–µ—Ç—ã, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î)
‚îú‚îÄ‚îÄ alembic.ini               # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Alembic (–ø—É—Ç—å –∫ –±–∞–∑–µ, –ø—É—Ç–∏ –∫ –º–æ–¥–µ–ª—è–º –∏ –º–∏–≥—Ä–∞—Ü–∏—è–º)
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ .dockerignore
‚îú‚îÄ‚îÄ dcoker-compose.yaml
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ entrypoint.sh             # –î–ª—è –æ–∂–∏–¥–∞–Ω–∏–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ postgreSQL –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ 
‚îî‚îÄ‚îÄ README.md
```

---

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
python -m venv .venv
source .venv/bin/activate  # –∏–ª–∏ .venv\Scripts\activate –¥–ª—è Windows

pip install -r requirements.txt
```

### 2. –ó–∞–ø—É—Å–∫ FastAPI

```bash
uvicorn app.main:app --reload
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:
- Swagger UI: http://localhost:8000/docs  
- ReDoc: http://localhost:8000/redoc

> #### ‚öôÔ∏è –î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ö–µ–º–æ–π –ë–î –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Alembic ‚Äî ([—Å–º. –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é.](alembic/README.md))

---

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

- **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:** `POST /auth/register`
- **–í—Ö–æ–¥:** `POST /auth/token` (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `username` + `password`)
- **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞:** `POST /auth/refresh`  
  (–ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è refresh token ‚Äî –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –ª–æ–≥–∏–Ω–µ)
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ JWT –≤ –æ—Ç–≤–µ—Ç
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞: **Authorize** –≤ Swagger UI

> ‚ö†Ô∏è **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:**  
> –í Swagger UI –º–æ–∂–Ω–æ –Ω–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É **Authorize**, —á—Ç–æ–±—ã –≤–≤–µ—Å—Ç–∏ `access` –∏–ª–∏ `refresh` —Ç–æ–∫–µ–Ω.  
> –£—á—Ç–∏, —á—Ç–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç `/auth/refresh` –æ–∂–∏–¥–∞–µ—Ç –∏–º–µ–Ω–Ω–æ **refresh —Ç–æ–∫–µ–Ω**.  
> –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞—Ç—å –≤ –Ω–µ–≥–æ `access —Ç–æ–∫–µ–Ω`, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–µ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç.

---

## üéÆ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

| –ú–µ—Ç–æ–¥ | –ú–∞—Ä—à—Ä—É—Ç               | –û–ø–∏—Å–∞–Ω–∏–µ                                |
|-------|-----------------------|------------------------------------------|
| GET   | `/posts`              | –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø–æ—Å—Ç—ã                       |
| GET   | `/posts/{id}`         | –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å—Ç –ø–æ ID                      |
| POST  | `/posts`              | –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø–æ—Å—Ç (—Ç—Ä–µ–±—É–µ—Ç —Ç–æ–∫–µ–Ω)       |
| PUT   | `/posts/{id}`         | –û–±–Ω–æ–≤–∏—Ç—å –ø–æ—Å—Ç (–µ—Å–ª–∏ —Ç—ã –≤–ª–∞–¥–µ–ª–µ—Ü)         |
| DELETE| `/posts/{id}`         | –£–¥–∞–ª–∏—Ç—å –ø–æ—Å—Ç (–µ—Å–ª–∏ —Ç—ã –≤–ª–∞–¥–µ–ª–µ—Ü)          |
| GET   | `/comments/post/{id}` | –ü–æ–ª—É—á–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –ø–æ—Å—Ç—É             |
| POST  | `/comments/post/{id}` | –°–æ–∑–¥–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –ø–æ—Å—Ç—É              |
| PUT   | `/comments/{id}`      | –û–±–Ω–æ–≤–∏—Ç—å —Å–≤–æ–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π                |
| DELETE| `/comments/{id}`      | –£–¥–∞–ª–∏—Ç—å —Å–≤–æ–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π                 |

---

## üì¶ .env —Ñ–∞–π–ª (–ø—Ä–∏–º–µ—Ä)

```
POSTGRES_DB=miniblog
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_HOST=db
POSTGRES_PORT=5432

SECRET_KEY=your_secret_key
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7
```

---

## üê≥ Docker (–ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞)

```bash
# –°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç
docker compose up --build
```

–ü—Ä–æ–µ–∫—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: [http://localhost:8000](http://localhost:8000)  
–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API: [http://localhost:8000/docs](http://localhost:8000/docs)

> ‚ùó –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –±–∞–∑–∞ —Å–æ–∑–¥–∞—Å—Ç—Å—è –ø—É—Å—Ç–æ–π. Alembic –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **–Ø–∑—ã–∫:** Python 3.11+
- **–§—Ä–µ–π–º–≤–æ—Ä–∫:** FastAPI
- **ORM:** SQLAlchemy
- **–•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** Passlib (bcrypt)
- **JWT:** python-jose
- **Pydantic:** –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- **Swagger/OpenAPI:** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## üìå –ü–ª–∞–Ω—ã –Ω–∞ –±—É–¥—É—â–µ–µ

- [x] SQLite + SQLAlchemy
- [x] –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (JWT)
- [x] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ access-—Ç–æ–∫–µ–Ω–∞ —á–µ—Ä–µ–∑ refresh-token
- [x] Swagger –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ JWT-—Ç–æ–∫–µ–Ω
- [x] –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ CRUD —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞
- [x] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ—Å—Ç–æ–≤
- [x] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- [x] Alembic –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏—è–º–∏ ([–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è](alembic/README.md))
- [x] –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ PostgreSQL –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
- [x] Docker-—Ñ–∞–π–ª –∏ docker-compose
- [ ] –ù–∞–ø–∏—Å–∞–Ω–∏–µ unit-—Ç–µ—Å—Ç–æ–≤ —Å pytest
- [ ] CI/CD —Å –ø–æ–º–æ—â—å—é GitHub Actions
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ API —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ (Swagger/Redoc)

---

## üë®‚Äçüíª –ê–≤—Ç–æ—Ä

–°–æ–∑–¥–∞–Ω –≤ —É—á–µ–±–Ω—ã—Ö —Ü–µ–ª—è—Ö —Å FastAPI
